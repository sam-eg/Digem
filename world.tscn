[gd_scene load_steps=14 format=3 uid="uid://cn3fr85akqbbj"]

[ext_resource type="Script" path="res://layer_holder.gd" id="1_tppkh"]
[ext_resource type="Texture2D" uid="uid://dvne3q43e4o2d" path="res://simple64x_tiles6.png" id="2_rchwp"]
[ext_resource type="Texture2D" uid="uid://bcv4tijsen1ai" path="res://sky.png" id="2_u4yu6"]
[ext_resource type="Texture2D" uid="uid://b8pk45e5s0g6f" path="res://ground.png" id="3_co1vy"]
[ext_resource type="PackedScene" uid="uid://dyd305xyng33k" path="res://player.tscn" id="3_ljydt"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_8u342"]
texture = ExtResource("2_u4yu6")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_p7awa"]
texture = ExtResource("3_co1vy")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0

[sub_resource type="TileSet" id="TileSet_0d8jp"]
tile_size = Vector2i(64, 64)
sources/0 = SubResource("TileSetAtlasSource_8u342")
sources/1 = SubResource("TileSetAtlasSource_p7awa")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_y0mek"]
texture = ExtResource("2_rchwp")
texture_region_size = Vector2i(64, 64)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
3:0/0 = 0
3:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
4:0/0 = 0
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
0:1/0 = 0
1:1/0 = 0
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-32, -32, 32, -32, 32, 32, -32, 32)
3:1/0 = 0
4:1/0 = 0

[sub_resource type="TileSet" id="TileSet_8nkuq"]
tile_size = Vector2i(64, 64)
physics_layer_0/collision_layer = 1
sources/0 = SubResource("TileSetAtlasSource_y0mek")

[sub_resource type="Curve" id="Curve_twsk1"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.996689, 0.169587), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_xnr0u"]
curve = SubResource("Curve_twsk1")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_4u1u8"]
particle_flag_disable_z = true
emission_shape = 3
emission_box_extents = Vector3(20, 20, 1)
radial_velocity_min = -2.23517e-05
radial_velocity_max = 100.0
gravity = Vector3(0, 100, 0)
scale_max = 5.0
scale_curve = SubResource("CurveTexture_xnr0u")
color = Color(0.878846, 0.721191, 0.372613, 1)

[node name="World" type="Node2D"]

[node name="LayerHolder" type="Node2D" parent="."]
script = ExtResource("1_tppkh")

[node name="Background" type="TileMapLayer" parent="LayerHolder"]
tile_set = SubResource("TileSet_0d8jp")

[node name="Land" type="TileMapLayer" parent="LayerHolder"]
tile_set = SubResource("TileSet_8nkuq")

[node name="Player" parent="." instance=ExtResource("3_ljydt")]
position = Vector2(556, -28)

[node name="DrillTimer" type="Timer" parent="."]

[node name="DrillParticles" type="GPUParticles2D" parent="."]
emitting = false
amount = 60
process_material = SubResource("ParticleProcessMaterial_4u1u8")

[connection signal="drill_down" from="Player" to="LayerHolder" method="_on_player_drill_down"]
[connection signal="drill_left" from="Player" to="LayerHolder" method="_on_player_drill_left"]
[connection signal="drill_right" from="Player" to="LayerHolder" method="_on_player_drill_right"]
[connection signal="stop_drill" from="Player" to="LayerHolder" method="_on_player_stop_drill"]
[connection signal="timeout" from="DrillTimer" to="LayerHolder" method="_on_drill_timer_timeout"]
